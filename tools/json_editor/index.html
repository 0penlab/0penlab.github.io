<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON Viewer & Editor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    
    body, html {
      height: 100%;
      overflow: hidden;
    }
    
    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      background-color: #f5f5f5;
    }
    
    .header {
      background-color: #2c3e50;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .title {
      font-size: 18px;
      font-weight: bold;
    }
    
    .btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
      margin-left: 10px;
      font-size: 14px;
    }
    
    .btn:hover {
      background-color: #2980b9;
    }
    
    .editor-container {
      display: flex;
      flex: 1;
      overflow: hidden;
      position: relative;
    }
    
    .editor, .viewer {
      flex: 1;
      overflow: auto;
      padding: 10px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      line-height: 1.5;
      resize: none;
    }
    
    .editor {
      background-color: #fff;
      border: none;
      outline: none;
      white-space: pre;
      tab-size: 2;
    }
    
    .viewer {
      background-color: #fff;
      white-space: pre-wrap;
      word-break: break-all;
    }
    
    .resizer {
      width: 5px;
      height: 100%;
      background-color: #ddd;
      cursor: col-resize;
    }
    
    .error-msg {
      color: #e74c3c;
      background-color: #fadbd8;
      padding: 5px 10px;
      margin-top: 10px;
      border-radius: 3px;
      font-size: 14px;
      display: none;
    }
    
    .string { color: #27ae60; }
    .number { color: #2980b9; }
    .boolean { color: #8e44ad; }
    .null { color: #c0392b; }
    .key { color: #e67e22; }
    
    @media (max-width: 768px) {
      .editor-container {
        flex-direction: column;
      }
      .resizer {
        width: 100%;
        height: 5px;
        cursor: row-resize;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">JSON Viewer & Editor</div>
      <div>
        <button class="btn" id="formatBtn">Format</button>
        <button class="btn" id="compressBtn">Compress</button>
        <button class="btn" id="clearBtn">Clear</button>
      </div>
    </div>
    
    <div class="editor-container">
      <textarea class="editor" id="jsonEditor" placeholder="Enter your JSON here..."></textarea>
      <div class="resizer" id="resizer"></div>
      <div class="viewer" id="jsonViewer"></div>
    </div>
    
    <div class="error-msg" id="errorMsg"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const editor = document.getElementById('jsonEditor');
      const viewer = document.getElementById('jsonViewer');
      const resizer = document.getElementById('resizer');
      const errorMsg = document.getElementById('errorMsg');
      const formatBtn = document.getElementById('formatBtn');
      const compressBtn = document.getElementById('compressBtn');
      const clearBtn = document.getElementById('clearBtn');
      
      let isResizing = false;
      let initialPos = 0;
      let initialWidth = 0;
      
      // Sample JSON for first load
      const sampleJson = {
        "name": "JSON Viewer & Editor",
        "version": "1.0.0",
        "description": "A simple JSON viewer and editor",
        "features": [
          "View JSON",
          "Edit JSON",
          "Format JSON",
          "Compress JSON"
        ],
        "author": {
          "name": "Developer",
          "email": "dev@example.com"
        },
        "isOpenSource": true,
        "stars": 42
      };
      
      editor.value = JSON.stringify(sampleJson, null, 2);
      updateViewer(editor.value);
      
      // Auto-resize editor
      function autoResizeEditor() {
        editor.style.height = 'auto';
        editor.style.height = editor.scrollHeight + 'px';
      }
      
      // Update the viewer with formatted JSON
      function updateViewer(jsonText) {
        try {
          if (!jsonText.trim()) {
            viewer.innerHTML = '';
            errorMsg.style.display = 'none';
            return;
          }
          
          const parsedJson = JSON.parse(jsonText);
          const formattedJson = syntaxHighlight(JSON.stringify(parsedJson, null, 2));
          viewer.innerHTML = formattedJson;
          errorMsg.style.display = 'none';
        } catch (e) {
          errorMsg.textContent = `Error: ${e.message}`;
          errorMsg.style.display = 'block';
        }
      }
      
      // Syntax highlighting
      function syntaxHighlight(json) {
        json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, 
          function (match) {
            let cls = 'number';
            if (/^"/.test(match)) {
              if (/:$/.test(match)) {
                cls = 'key';
                match = match.replace(':', '');
              } else {
                cls = 'string';
              }
            } else if (/true|false/.test(match)) {
              cls = 'boolean';
            } else if (/null/.test(match)) {
              cls = 'null';
            }
            
            if (cls === 'key') {
              return '<span class="' + cls + '">' + match + '</span>:';
            } else {
              return '<span class="' + cls + '">' + match + '</span>';
            }
          }
        );
      }
      
      // Format JSON
      function formatJson() {
        try {
          const jsonText = editor.value;
          if (!jsonText.trim()) return;
          
          const parsedJson = JSON.parse(jsonText);
          editor.value = JSON.stringify(parsedJson, null, 2);
          updateViewer(editor.value);
        } catch (e) {
          errorMsg.textContent = `Error: ${e.message}`;
          errorMsg.style.display = 'block';
        }
      }
      
      // Compress JSON
      function compressJson() {
        try {
          const jsonText = editor.value;
          if (!jsonText.trim()) return;
          
          const parsedJson = JSON.parse(jsonText);
          editor.value = JSON.stringify(parsedJson);
          updateViewer(editor.value);
        } catch (e) {
          errorMsg.textContent = `Error: ${e.message}`;
          errorMsg.style.display = 'block';
        }
      }
      
      // Initialize resizer
      function initResizer() {
        const container = document.querySelector('.editor-container');
        const isHorizontal = window.innerWidth > 768;
        
        resizer.addEventListener('mousedown', function(e) {
          isResizing = true;
          initialPos = isHorizontal ? e.clientX : e.clientY;
          
          const editorRect = editor.getBoundingClientRect();
          initialWidth = isHorizontal ? editorRect.width : editorRect.height;
          
          document.addEventListener('mousemove', resize);
          document.addEventListener('mouseup', stopResize);
        });
        
        function resize(e) {
          if (!isResizing) return;
          
          const containerRect = container.getBoundingClientRect();
          const containerSize = isHorizontal ? containerRect.width : containerRect.height;
          const pos = isHorizontal ? e.clientX : e.clientY;
          const diff = pos - initialPos;
          
          const newSize = Math.max(50, Math.min(initialWidth + diff, containerSize - 50));
          const percentage = (newSize / containerSize) * 100;
          
          if (isHorizontal) {
            editor.style.flexBasis = `${percentage}%`;
            viewer.style.flexBasis = `${100 - percentage}%`;
          } else {
            editor.style.flexBasis = `${percentage}%`;
            viewer.style.flexBasis = `${100 - percentage}%`;
          }
        }
        
        function stopResize() {
          isResizing = false;
          document.removeEventListener('mousemove', resize);
          document.removeEventListener('mouseup', stopResize);
        }
      }
      
      // Event listeners
      editor.addEventListener('input', function() {
        updateViewer(this.value);
      });
      
      formatBtn.addEventListener('click', formatJson);
      compressBtn.addEventListener('click', compressJson);
      clearBtn.addEventListener('click', function() {
        editor.value = '';
        viewer.innerHTML = '';
        errorMsg.style.display = 'none';
      });
      
      // Handle window resize
      window.addEventListener('resize', function() {
        initResizer();
      });
      
      // Initialize
      initResizer();
      updateViewer(editor.value);
    });
  </script>
</body>
</html>
